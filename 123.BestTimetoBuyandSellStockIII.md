## 123. Best Time to Buy and Sell Stock III
- 123. Best Time to Buy and Sell Stock III [Array] [Dynamic Programming] [Hard]

#### Tags
- [Array] [Dynamic Programming] [Hard]

#### Problem
Say you have an array for which the ith element is the price of a given stock on day i.  
Design an algorithm to find the maximum profit. You may complete at most two transactions.

**Note**:
You may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).

#### Data Structure
- Array

#### Algorithm/Method
- Dynamic Programming

#### Input
- `vector<int>& prices`

#### Output
- `int`

#### Solution
``` C++
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        if (prices.size() < 2) return 0;
        int n = prices.size();
        vector<int> f(n, 0);
        vector<int> g(n, 0);
        for (int i = 1, base = prices[0]; i < n; i++) {
            base = min(base, prices[i]);
            f[i] = max(f[i - 1], prices[i] - base);
        }
        for (int j = n - 2, peak = prices[n - 1]; j >= 0; j--) {
            peak = max(peak, prices[j]);
            g[j] = max(g[j + 1], peak - prices[j]);
        }
        int max_profit = 0;
        for (int k = 0; k < n; k++) {
            max_profit = max(max_profit, f[k] + g[k]);
        }
        return max_profit;
    }
};
```

#### Boudary Checking
- `if (prices.size() < 2) return 0;`

#### Time Complexity
- $O(n)$

#### Space Complexity
- $O(n)$

#### Notes
- Use Dynamic Programming.

#### Mistakes
- 

#### Related Problems
- 121. Best Time to Buy and Sell Stock [Array] [Greedy] [Easy]
- 122. Best Time to Buy and Sell Stock II [Array] [Greedy] [Easy]
- 123. Best Time to Buy and Sell Stock III [Array] [Dynamic Programming] [Hard]
